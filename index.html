<!DOCTYPE html>
<html lang="de">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ausbildungs‑Matcher (Junior) – SAP Beratungshaus</title>
  <style>
    :root {
      --bg: #0f172a;
      --card: #1f2937;
      --muted: #94a3b8;
      --text: #e5e7eb;
      --brand: #00b7f3;
      --brand-2: #ff8d0b;
      --shadow: 0 20px 60px rgba(0, 0, 0, .35);
      --radius: 16px;
    }

    * {
      box-sizing: border-box
    }

    html,
    body {
      height: 100%
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial;
      background: url('Hintergrund.png') no-repeat center center;
      background-size: cover;
      background-attachment: fixed;
      color: var(--text);
      overflow-x: hidden;
      min-height: 100vh;
    }

    /* Fallback für iOS Safari (fixed attachment wird nicht unterstützt) */
    @supports (-webkit-touch-callout: none) {
      body {
        background-attachment: scroll;
      }

      body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: url('Hintergrund.png') no-repeat center center;
        background-size: cover;
        z-index: -1;
      }
    }

    /* Top Banner */
    .topbar {
      position: sticky;
      top: 0;
      z-index: 50;
      backdrop-filter: blur(6px);
      background: linear-gradient(180deg, rgba(15, 23, 42, .9), rgba(15, 23, 42, .75));
      border-bottom: 1px solid rgba(148, 163, 184, .25);
    }

    .topbar-inner {
      max-width: 1100px;
      margin: 0 auto;
      padding: 10px 18px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 14px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 12px
    }

    .brand img {
      height: 32px
    }

    .brand-name {
      font-weight: 700;
      letter-spacing: .2px;
      color: var(--brand)
    }

    .contact a {
      color: #e5e7eb;
      text-decoration: none;
      font-weight: 700;
      border-bottom: 2px solid transparent
    }

    .contact a:hover {
      color: var(--brand);
      border-bottom-color: var(--brand-2)
    }

    header {
      max-width: 1100px;
      margin: 40px auto 18px;
      padding: 0 18px
    }

    .hero {
      background: linear-gradient(135deg, rgba(0, 183, 243, .18), rgba(255, 141, 11, .14));
      border: 1px solid rgba(148, 163, 184, .18);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow);
    }

    .title {
      font-size: clamp(20px, 2.8vw, 32px);
      line-height: 1.15;
      margin: 0
    }

    .title span {
      color: var(--brand)
    }

    .cta {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      margin-top: 40px;
    }

    main {
      max-width: 1100px;
      margin: 40px auto 0;
      padding: 0 18px 60px
    }

    /* Grid – Info-Karten nebeneinander ab >= 900px */
    .grid {
      display: grid;
      gap: 16px;
      grid-template-columns: repeat(12, 1fr)
    }

    .col-4 {
      grid-column: span 12
    }

    @media(min-width: 900px) {
      .col-4 {
        grid-column: span 4
      }
    }


    .card {
      background: var(--card);
      border: 1px solid rgba(148, 163, 184, .18);
      border-radius: var(--radius);
      padding: 16px;
      box-shadow: var(--shadow);

      display: flex;
      flex-direction: column;
    }

    .card h3 {
      margin: 0 0 8px;
      font-size: 1.1rem;
      line-height: 1.3;
    }

    .card .actions {
      margin-top: auto;
    }


    /* Buttons */
    .btn-solid {
      appearance: none;
      background: var(--brand-2);
      color: #1f1300;
      border: none;
      border-radius: 12px;
      padding: 12px 18px;
      font-weight: 800;
      cursor: pointer;
      box-shadow: 0 10px 24px rgba(255, 141, 11, .25);
      font-size: 16px;
      transition: all 0.2s ease;
    }

    .btn-solid:hover {
      filter: brightness(1.05);
      transform: translateY(-1px);
    }

    .btn-solid:active {
      transform: translateY(0);
    }

    .btn-outline {
      appearance: none;
      background: transparent;
      color: var(--text);
      border: 1px solid rgba(148, 163, 184, .35);
      border-radius: 12px;
      padding: 12px 18px;
      font-weight: 700;
      cursor: pointer;
      font-size: 16px;
      transition: all 0.2s ease;
    }

    .btn-outline:hover {
      background: rgba(148, 163, 184, .1);
      border-color: var(--brand);
    }

    #quiz {
      display: none
    }

    .progress {
      height: 10px;
      background: #0b1220;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, .18);
      overflow: hidden;
    }

    .bar {
      height: 100%;
      width: 0;
      background: linear-gradient(90deg, var(--brand), var(--brand-2));
      transition: width 0.3s ease;
    }

    .question {
      padding: 14px;
      border-radius: 12px;
      border: 1px solid rgba(148, 163, 184, .18);
      margin: 10px 0;
      background: rgba(2, 6, 23, .55);
    }

    .q-text {
      margin: 0 0 10px;
      font-weight: 600;
      font-size: 1rem;
      line-height: 1.4;
    }

    .options {
      display: flex;
      gap: 10px;
      flex-wrap: wrap
    }

    .option {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 9px 12px;
      border-radius: 10px;
      border: 1px solid rgba(148, 163, 184, .25);
      cursor: pointer;
      background: rgba(148, 163, 184, .06);
      transition: all 0.2s ease;
      font-size: 15px;
    }

    .option:hover {
      background: rgba(148, 163, 184, .12);
      border-color: var(--brand);
    }

    .option input {
      accent-color: var(--brand);
      transform: scale(1.2);
      cursor: pointer;
    }

    #result {
      display: none
    }

    .result-badge {
      font-weight: 800;
      color: #001018;
      background: linear-gradient(90deg, var(--brand), var(--brand-2));
      display: inline-block;
      padding: 10px 14px;
      border-radius: 999px;
      font-size: 14px;
    }

    .chart {
      border: 1px solid rgba(148, 163, 184, .18);
      border-radius: 12px;
      padding: 8px;
      background: rgba(2, 6, 23, .55);
      overflow: hidden;
    }

    /* ---- HORIZONTALE BALKEN (on-screen) ---- */
    .rows {
      display: flex;
      flex-direction: column;
      gap: 12px;
      padding: 6px
    }

    .row {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .row-label {
      color: #cbd5e1;
      font-size: 13px;
      line-height: 1.3;
      flex: 0 0 220px;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    .row-bar {
      position: relative;
      height: 28px;
      border: 1px solid rgba(148, 163, 184, .18);
      border-radius: 8px;
      background: rgba(148, 163, 184, .12);
      overflow: hidden;
      flex: 1 1 0;
      min-width: 0;
    }

    .row-fill {
      position: absolute;
      inset: 0 auto 0 0;
      width: 0%;
      background: linear-gradient(90deg, var(--brand), var(--brand-2));
      border-radius: 8px;
      transition: width .4s ease;
    }

    .row.winner .row-fill {
      filter: saturate(1.15) brightness(1.06);
      box-shadow: inset 0 0 0 rgba(0, 0, 0, 0), 0 6px 18px rgba(255, 141, 11, .18);
    }

    .row-pct {
      flex: 0 0 70px;
      font-weight: 800;
      font-size: 14px;
      color: #fff;
      background: rgba(148, 163, 184, .12);
      border: 1px solid rgba(148, 163, 184, .22);
      padding: 4px 8px;
      border-radius: 999px;
      text-align: right;
    }

    .result-grid {
      display: grid;
      gap: 16px;
      grid-template-columns: repeat(12, 1fr)
    }

    .span-7 {
      grid-column: span 12
    }

    .span-5 {
      grid-column: span 12
    }

    @media(min-width: 1000px) {
      .span-7 {
        grid-column: span 7
      }

      .span-5 {
        grid-column: span 5
      }
    }

    /* Modal */
    .modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(2, 6, 23, .8);
      z-index: 100;
      padding: 16px;
    }

    .modal.open {
      display: flex
    }

    .modal-dialog {
      max-width: 1100px;
      width: 100%;
      max-height: 88vh;
      background: var(--card);
      border: 1px solid rgba(148, 163, 184, .25);
      border-radius: 20px;
      box-shadow: var(--shadow);
      overflow: auto
    }

    .modal-head {
      position: sticky;
      top: 0;
      background: var(--card);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 18px 20px;
      border-bottom: 1px solid rgba(148, 163, 184, .2)
    }

    .modal-title {
      font-size: 26px;
      font-weight: 900;
      line-height: 1.2;
      padding-right: 10px;
    }

    .modal-body {
      padding: 22px 20px 24px;
      color: var(--text);
      font-size: 1.1rem;
      line-height: 1.6
    }

    .close-x {
      appearance: none;
      background: transparent;
      color: #e5e7eb;
      border: none;
      font-size: 28px;
      cursor: pointer;
      padding: 0;
      line-height: 1;
      flex-shrink: 0;
    }

    /* Error Modal */
    .error-modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(2, 6, 23, .8);
      z-index: 100;
      padding: 16px;
    }

    .error-modal.open {
      display: flex
    }

    .error-dialog {
      max-width: 500px;
      width: 100%;
      background: var(--card);
      border: 1px solid rgba(148, 163, 184, .25);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 0;
      animation: slideIn 0.3s ease-out
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: scale(0.9) translateY(-20px)
      }

      to {
        opacity: 1;
        transform: scale(1) translateY(0)
      }
    }

    .error-header {
      background: #4b5563;
      padding: 20px;
      border-radius: calc(var(--radius) - 1px) calc(var(--radius) - 1px) 0 0;
      display: flex;
      align-items: center;
      gap: 12px
    }

    .error-title {
      font-size: 20px;
      font-weight: 800;
      margin: 0;
      color: #001018
    }

    .error-body {
      padding: 24px 20px
    }

    .error-message {
      font-size: 16px;
      line-height: 1.6;
      color: var(--text);
      margin: 0 0 20px;
      text-align: center
    }

    .error-footer {
      display: flex;
      gap: 12px;
      justify-content: center;
      padding: 0 20px 20px
    }

    .error-btn {
      appearance: none;
      background: #4b5563;
      color: #e5e7eb;
      border: none;
      border-radius: 12px;
      padding: 12px 24px;
      font-weight: 800;
      cursor: pointer;
      box-shadow: none;
      transition: all 0.2s ease
    }

    .error-btn:hover {
      filter: brightness(1.1);
      transform: translateY(-2px);
      box-shadow: 0 12px 32px rgba(0, 183, 243, .35)
    }

    .error-btn:active {
      transform: translateY(0)
    }

    /* ---------- PRINT LAYOUT (nur Ergebnis) ---------- */
    @media print {

      /* Alles außer Druckbereich ausblenden */
      body {
        background: #fff !important;
      }

      .topbar,
      header,
      main,
      .modal,
      .error-modal {
        display: none !important;
      }

      #printArea {
        display: block !important;
        color: #111827;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
        max-width: 900px;
        margin: 0 auto;
      }

      .print-title {
        margin: 0 0 6px;
        font-size: 20px;
        font-weight: 800;
        color: #111827;
      }

      .print-meta {
        margin: 0 0 10px;
        color: #6b7280;
        font-size: 12px;
      }

      .print-badge {
        display: inline-block;
        padding: 6px 10px;
        border-radius: 999px;
        background: #2563eb;
        color: #fff;
        font-weight: 800;
        font-size: 12px;
        margin-bottom: 8px;
      }

      .print-desc {
        margin: 8px 0 10px;
        line-height: 1.5;
        color: #111827;
      }

      .print-scores h2 {
        margin: 14px 0 8px;
        font-size: 14px;
        color: #111827;
      }

      .print-scores ul {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      .print-scores li {
        display: grid;
        grid-template-columns: 1fr 60px;
        gap: 12px;
        align-items: center;
        padding: 8px 0;
        border-bottom: 1px solid #e5e7eb;
      }

      .print-scores .label {
        color: #374151;
      }

      .print-scores .pct {
        justify-self: end;
        font-weight: 800;
        color: #111827;
        background: #f3f4f6;
        border: 1px solid #e5e7eb;
        padding: 2px 8px;
        border-radius: 999px;
      }

      .print-footer {
        margin-top: 16px;
        padding-top: 8px;
        border-top: 1px solid #e5e7eb;
        text-align: right;
        color: #6b7280;
        font-size: 12px;
      }

      /* Seitenränder im PDF (Chrome/Edge) */
      @page {
        margin: 14mm;
      }
    }

    /* ========== RESPONSIVE SMARTPHONE OPTIMIERUNGEN ========== */

    /* Tablet (max 900px) */
    @media (max-width: 900px) {
      header {
        margin: 20px auto 12px;
        padding: 0 14px;
      }

      .hero {
        padding: 20px;
        border-radius: 14px;
      }

      .title {
        font-size: clamp(20px, 5vw, 28px);
      }

      .cta {
        margin-top: 24px;
      }

      main {
        padding: 0 14px 50px;
        margin-top: 24px;
      }

      .result-grid {
        grid-template-columns: 1fr;
        gap: 14px;
      }

      .span-7,
      .span-5 {
        grid-column: span 12;
      }

      .modal-title {
        font-size: 22px;
      }

      .modal-body {
        font-size: 1rem;
      }
    }

    /* Smartphone (max 640px) */
    @media (max-width: 640px) {
      .topbar-inner {
        padding: 8px 12px;
        gap: 8px;
      }

      .brand img {
        height: 28px;
      }

      .brand-name {
        font-size: 14px;
      }

      .contact a {
        font-size: 14px;
      }

      header {
        margin: 16px auto 10px;
        padding: 0 12px;
      }

      .hero {
        padding: 16px;
        border-radius: 12px;
      }

      .title {
        font-size: 20px;
        line-height: 1.25;
      }

      .cta {
        margin-top: 20px;
        gap: 10px;
      }

      main {
        padding: 0 12px 40px;
        margin-top: 20px;
      }

      .grid {
        gap: 12px;
      }

      .card {
        padding: 14px;
        border-radius: 12px;
      }

      .card h3 {
        font-size: 1rem;
        margin-bottom: 10px;
      }

      .btn-solid,
      .btn-outline {
        padding: 12px 16px;
        font-size: 15px;
        width: 100%;
        text-align: center;
      }

      /* BALKEN FIX FÜR HANDY: Bleiben horizontal */
      .row {
        flex-direction: row;
        /* Zwingt die horizontale Ansicht */
        align-items: center;
        gap: 8px;
      }

      .row-label {
        flex: 0 0 100px;
        /* Schmaleres Label für Handy */
        font-size: 11px;
        white-space: normal;
        /* Erlaubt Zeilenumbruch falls nötig */
        line-height: 1.1;
      }

      .row-bar {
        flex: 1;
        height: 24px;
        /* Etwas schlanker */
      }

      .row-pct {
        flex: 0 0 45px;
        /* Kompakterer Prozentwert */
        font-size: 12px;
        padding: 3px 6px;
        text-align: center;
      }

      .result-badge {
        font-size: 13px;
        padding: 8px 12px;
        display: block;
        text-align: center;
        margin-bottom: 8px;
      }

      .modal-dialog {
        border-radius: 16px;
        max-height: 92vh;
      }

      .modal-body {
        padding: 16px;
        font-size: 15px;
      }
    }

    .modal-dialog {
      border-radius: 16px;
      max-height: 92vh;
    }

    .modal-head {
      padding: 14px 16px;
    }

    .modal-title {
      font-size: 18px;
      padding-right: 8px;
    }

    .modal-body {
      padding: 16px;
      font-size: 15px;
    }

    .close-x {
      font-size: 32px;
    }

    .error-dialog {
      max-width: calc(100% - 32px);
    }

    .error-header {
      padding: 16px;
    }

    .error-title {
      font-size: 18px;
    }

    .error-body {
      padding: 20px 16px;
    }

    .error-message {
      font-size: 15px;
    }

    .error-footer {
      padding: 0 16px 16px;
    }


    /* Sehr kleine Smartphones (max 380px) */
    @media (max-width: 380px) {
      .topbar-inner {
        padding: 8px 10px;
      }

      .brand img {
        height: 24px;
      }

      .brand-name {
        font-size: 13px;
      }

      .contact a {
        font-size: 13px;
      }

      header {
        margin: 12px auto 8px;
        padding: 0 10px;
      }

      .hero {
        padding: 14px;
      }

      .title {
        font-size: 18px;
      }

      main {
        padding: 0 10px 30px;
        margin-top: 16px;
      }

      .card {
        padding: 12px;
      }

      .card h3 {
        font-size: 0.95rem;
      }

      .btn-solid,
      .btn-outline {
        padding: 11px 14px;
        font-size: 14px;
      }

      .q-text {
        font-size: 14px;
      }

      .option {
        padding: 9px 10px;
        font-size: 14px;
      }

      .row-label {
        font-size: 13px;
      }

      .row-pct {
        font-size: 14px;
      }

      .result-badge {
        font-size: 12px;
        padding: 7px 10px;
      }

      #winnerHint {
        font-size: 13px;
      }

      .modal-title {
        font-size: 16px;
      }

      .modal-body {
        font-size: 14px;
        padding: 14px;
      }
    }

    /* Touch-optimierte Interaktionen */
    @media (hover: none) and (pointer: coarse) {

      .btn-solid,
      .btn-outline,
      .option,
      .info-btn {
        min-height: 44px;
        min-width: 44px;
      }

      .close-x {
        min-width: 44px;
        min-height: 44px;
      }

      .option {
        padding: 12px 14px;
      }
    }
  </style>
</head>

<body>
  <div class="topbar" role="banner" aria-label="Kopfbereich">
    <div class="topbar-inner">
      <div class="brand">
        <img src="tcon-logo.png" alt="tcon Logo" />
        <div class="brand-name">tcon · SAP‑Beratungshaus</div>
      </div>
      <div class="contact">
        <a href="mailto:info@tcon.com" aria-label="E-Mail an info@tcon.com senden">info(at)tcon.com</a>
      </div>
    </div>
  </div>

  <header>
    <div class="hero card">
      <h1 class="title">Welche Ausbildung passt zu dir? <span>Anwendungsentwicklung</span>,
        <span>Systemintegration</span> oder <span>Digitalisierungsmanagement</span>
      </h1>
      <div class="cta">
        <a class="btn-solid" href="#quiz" id="startBtn">Eignungscheck starten</a>
      </div>
    </div>
  </header>

  <main>
    <!-- Info-Karten -->
    <section class="grid" aria-label="Ausbildungsberufe">
      <article class="card col-4">
        <h3>Kaufmännisch – Digitalisierungsmanagement</h3>
        <div class="actions"><button class="btn-outline info-btn" data-title="Kaufmännisch – Digitalisierungsmanagement"
            data-text="Du findest es spannend, was Software im Unternehmen möglich macht und möchtest dabei auch programmieren lernen? In deiner Ausbildung lernst du, wie SAP als digitale Lösung Geschäftsprozesse besser macht – und wie du als Berater:in mit Verständnis für Technik, Organisation und Kommunikation genau daran mitarbeitest. Du bringst dich in Projekte ein, arbeitest mit verschiedenen Teams zusammen und wächst Schritt für Schritt in die Welt der Digitalisierung und Beratung hinein.">Info</button>
        </div>
      </article>
      <article class="card col-4">
        <h3>Fachinformatik – Systemintegration</h3>
        <div class="actions"><button class="btn-outline info-btn" data-title="Fachinformatik – Systemintegration"
            data-text="Du sorgst dafür, dass unsere IT läuft. Du lernst, Netzwerke einzurichten, Server zu betreuen und User zu unterstützen. Technik im Hintergrund? Ohne dich geht hier nichts.">Info</button>
        </div>
      </article>
      <article class="card col-4">
        <h3>Fachinformatik – Anwendungsentwicklung (SAP)</h3>
        <div class="actions"><button class="btn-outline info-btn"
            data-title="Fachinformatik – Anwendungsentwicklung (SAP)"
            data-text="Du entwickelst Software, die was kann und gebraucht wird. Mit Köpfchen und Kreativität schreibst du Code, testest Programme und findest Lösungen für echte Aufgaben. So wird aus Theorie Praxis.">Info</button>
        </div>
      </article>
    </section>

    <!-- Quiz -->
    <section id="quiz" class="card" aria-live="polite" aria-label="Eignungscheck" style="margin-top:16px">
      <div style="display:flex; align-items:center; gap:14px; margin-bottom:12px; flex-wrap:wrap">
        <h2 style="margin:0">Eignungscheck</h2>
        <div class="progress" style="flex:1; min-width:150px">
          <div class="bar" id="progressBar"></div>
        </div>
        <div id="progressText" style="color:var(--muted); min-width:50px; text-align:right">0%</div>
      </div>
      <div id="questionList"></div>
      <div style="display:flex; gap:12px; margin-top:14px; flex-wrap:wrap">
        <button class="btn-solid" id="submitBtn">Auswertung anzeigen</button>
        <button class="btn-outline" id="resetBtn">Zurücksetzen</button>
      </div>
    </section>

    <!-- Ergebnis -->
    <section id="result" class="card" aria-label="Ergebnis">
      <div style="display:flex; align-items:center; gap:12px; flex-wrap:wrap; margin-bottom:16px">
        <div class="result-badge" id="winnerBadge">Beste Übereinstimmung</div>
        <div id="winnerHint" style="color:var(--muted)"></div>
      </div>

      <div class="result-grid">
        <div class="span-7">
          <h3 style="margin-top:0">Dein Eignungsprofil</h3>
          <div class="chart">
            <div id="chartRows" class="rows" role="img" aria-label="Horizontales Balkendiagramm mit Ergebnissen"></div>
          </div>
        </div>
        <aside class="span-5">
          <h3>Empfehlung</h3>
          <div id="winnerText"></div>
          <div class="cta" style="margin-top:16px">
            <button class="btn-outline" onclick="window.print()">Ergebnis als PDF</button>
            <button class="btn-outline" id="restartBtn">Neu starten</button>
          </div>
        </aside>
      </div>
    </section>
  </main>

  <!-- PRINT TEMPLATE (nur für PDF sichtbar) -->
  <section id="printArea" aria-label="Druckbereich" style="display:none">
    <h1 class="print-title">Ausbildungs‑Matcher – Ergebnis</h1>
    <p class="print-meta" id="printMeta"></p>

    <div class="print-winner">
      <div class="print-badge" id="printWinnerBadge">Beste Übereinstimmung</div>
      <p class="print-desc" id="printWinnerText"></p>
    </div>

    <div class="print-scores">
      <h2>Prozentwerte</h2>
      <ul id="printList"></ul>
    </div>

    <div class="print-footer">
      <small>© tcon · SAP‑Beratungshaus</small>
    </div>
  </section>

  <!-- Modals -->
  <div class="modal" id="infoModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle"
    aria-describedby="modalBody">
    <div class="modal-dialog">
      <div class="modal-head">
        <div class="modal-title" id="modalTitle">Titel</div>
        <button class="close-x" id="modalClose" aria-label="Schließen">×</button>
      </div>
      <div class="modal-body" id="modalBody">Text</div>
    </div>
  </div>

  <div class="error-modal" id="errorModal" role="dialog" aria-modal="true" aria-labelledby="errorTitle">
    <div class="error-dialog">
      <div class="error-header">
        <h2 class="error-title" id="errorTitle">Hinweis</h2>
      </div>
      <div class="error-body">
        <p class="error-message" id="errorMessage">Bitte beantworte mindestens die Hälfte der Aussagen.</p>
        <div class="error-footer"><button class="error-btn" id="errorBtn">Verstanden</button></div>
      </div>
    </div>
  </div>

  <script>
    const QUESTIONS = [
      // --- Anwendungsentwicklung (AE) ---
      { t: "Ich habe Spaß daran, Probleme logisch zu analysieren und Lösungen zu programmieren.", w: { AE: 2, SI: 1, DM: 1 } },
      { t: "Ich finde es spannend, Funktionen oder Prozesse selbst zu entwickeln.", w: { AE: 2, SI: 0, DM: 1 } },
      { t: "Ich arbeite gern kreativ daran, Anwendungen oder Tools zu gestalten.", w: { AE: 2, SI: 0, DM: 1 } },
      { t: "Ich bleibe dran, bis ein Programm oder eine Funktion richtig funktioniert.", w: { AE: 2, SI: 1, DM: 0 } },
      { t: "Ich interessiere mich dafür, wie Daten verarbeitet, gespeichert und strukturiert werden.", w: { AE: 2, SI: 0, DM: 1 } },
      { t: "Ich löse gern technische oder mathematische Rätsel.", w: { AE: 2, SI: 1, DM: 0 } },

      // --- Systemintegration (SI) ---
      { t: "Ich kann mir vorstellen, Systeme und Geräte einzurichten und zu konfigurieren.", w: { AE: 0, SI: 2, DM: 1 } },
      { t: "Ich arbeite gern praktisch, z. B. Hardware einbauen oder Netzwerke verkabeln.", w: { AE: 1, SI: 2, DM: 0 } },
      { t: "Ich finde es spannend, wie Netzwerke, Server und Sicherheit zusammenspielen.", w: { AE: 0, SI: 2, DM: 1 } },
      { t: "Ich bleibe ruhig, wenn technische Probleme auftreten, und suche systematisch nach Lösungen.", w: { AE: 1, SI: 2, DM: 0 } },
      { t: "Ich mag es, Systeme stabil, zuverlässig und ordentlich organisiert zu halten.", w: { AE: 0, SI: 2, DM: 1 } },
      { t: "Ich teste gern Einstellungen oder Geräte, bis alles sauber funktioniert.", w: { AE: 1, SI: 2, DM: 0 } },

      // --- Daten‑ & Prozessmanagement (DM) ---
      { t: "Ich spreche gern mit Menschen, um ihre Anforderungen und Ziele zu verstehen.", w: { AE: 0, SI: 0, DM: 2 } },
      { t: "Ich mag es, Abläufe zu planen und die Übersicht zu behalten.", w: { AE: 0, SI: 1, DM: 2 } },
      { t: "Ich interessiere mich dafür, wie man Prozesse optimieren und effizienter gestalten kann.", w: { AE: 1, SI: 0, DM: 2 } },
      { t: "Ich kann mir vorstellen, Aufgaben zwischen Teams zu koordinieren.", w: { AE: 0, SI: 1, DM: 2 } },
      { t: "Ich erkläre gern Dinge verständlich oder halte kleine Präsentationen.", w: { AE: 0, SI: 0, DM: 2 } },
      { t: "Ich finde es interessant, wenn Systeme oder Programme miteinander Daten austauschen.", w: { AE: 1, SI: 1, DM: 2 } },
    ];

    const PROFILES = {
      AE: {
        name: "Fachinformatik – Anwendungsentwicklung (SAP)", desc: `Du passt gut zur Anwendungsentwicklung. Du baust gern Lösungen am Computer, bleibst dran und hast Interesse daran,
             wie Firmen mit Software arbeiten. Bei uns geht es viel um SAP – später lernst du z. B., wie man Oberflächen baut und
             Funktionen programmiert. Schritt für Schritt, im Team.` },
      SI: {
        name: "Fachinformatik – Systemintegration", desc: `Du passt gut zur Systemintegration. Du richtest gern Geräte ein, hilfst anderen und willst, dass Technik zuverlässig läuft.
             Du testest praktisch, hältst Ordnung (Updates, Sicherheit) und erklärst geduldig. So hältst du die IT am Laufen.` },
      DM: {
        name: "Kaufmännisch – Digitalisierungsmanagement", desc: `Du passt gut zum Digitalisierungsmanagement. Du sprichst gern mit Menschen, planst, erklärst und machst Abläufe einfacher.
             Du behältst Kosten/Nutzen im Blick und achtest auf Regeln. Gemeinsam mit uns setzt du passende digitale Lösungen um – oft mit SAP.` }
    };

    const listEl = document.getElementById('questionList');
    const barEl = document.getElementById('progressBar');
    const pText = document.getElementById('progressText');
    const quizSection = document.getElementById('quiz');
    const resultSection = document.getElementById('result');
    const startBtn = document.getElementById('startBtn');
    const submitBtn = document.getElementById('submitBtn');
    const resetBtn = document.getElementById('resetBtn');
    const restartBtn = document.getElementById('restartBtn');

    function renderQuestions() {
      listEl.innerHTML = '';
      QUESTIONS.forEach((q, i) => {
        const id = 'q' + i;
        const div = document.createElement('div');
        div.className = 'question';
        div.innerHTML = `
          <p class="q-text">${i + 1}. ${q.t}</p>
          <div class="options" role="radiogroup" aria-label="Antworten">
            <label class="option"><input type="radio" name="${id}" value="2"> Trifft zu</label>
            <label class="option"><input type="radio" name="${id}" value="1"> Teilweise</label>
            <label class="option"><input type="radio" name="${id}" value="0"> Trifft nicht zu</label>
          </div>`;
        listEl.appendChild(div);
      });
      updateProgress();
    }

    function updateProgress() {
      const total = QUESTIONS.length;
      const answered = [...document.querySelectorAll('.question')].filter(q => q.querySelector('input:checked')).length;
      const pct = Math.round((answered / total) * 100);
      barEl.style.width = pct + '%';
      pText.textContent = pct + '%';
    }

    listEl.addEventListener('change', updateProgress);

    startBtn?.addEventListener('click', (e) => {
      e.preventDefault();
      quizSection.style.display = 'block';
      resultSection.style.display = 'none';
      document.getElementById('quiz').scrollIntoView({ behavior: 'smooth' });
    });

    resetBtn?.addEventListener('click', () => { renderQuestions(); window.scrollTo({ top: 0, behavior: 'smooth' }); });
    restartBtn?.addEventListener('click', () => {
      resultSection.style.display = 'none';
      quizSection.style.display = 'block';
      renderQuestions();
      document.getElementById('quiz').scrollIntoView({ behavior: 'smooth' });
    });

    let idleTimer;
    function resetIdle() {
      clearTimeout(idleTimer);
      idleTimer = setTimeout(() => { renderQuestions(); window.scrollTo({ top: 0, behavior: 'smooth' }); }, 180000);
    }
    ['click', 'keydown', 'mousemove', 'touchstart'].forEach(evt => window.addEventListener(evt, resetIdle));

    function evaluate() {
      const scores = { AE: 0, SI: 0, DM: 0 };
      let answered = 0;
      QUESTIONS.forEach((q, i) => {
        const sel = document.querySelector(`input[name=q${i}]:checked`);
        if (!sel) return;
        answered++;
        const val = parseInt(sel.value, 10);
        for (const k of Object.keys(q.w)) { scores[k] += q.w[k] * val; }
      });

      const max = { AE: 0, SI: 0, DM: 0 };
      QUESTIONS.forEach(q => { for (const k of Object.keys(q.w)) { max[k] += q.w[k] * 2; } });

      const pct = {
        AE: Math.round(scores.AE / max.AE * 100),
        SI: Math.round(scores.SI / max.SI * 100),
        DM: Math.round(scores.DM / max.DM * 100)
      };

      const order = Object.keys(pct).sort((a, b) => pct[b] - pct[a]);
      const winner = order[0];

      document.getElementById('winnerBadge').textContent = `Beste Übereinstimmung: ${PROFILES[winner].name}`;
      document.getElementById('winnerHint').textContent = `Beantwortet: ${answered}/${QUESTIONS.length} Aussagen`;
      document.getElementById('winnerText').innerHTML = `<p>${PROFILES[winner].desc}</p>`;

      // On-screen Balken
      drawBarsHorizontal(pct, winner);

      // Druckdaten vorbereiten (nur Ergebnis mit Text + Prozentwerte)
      fillPrintData(pct, winner, answered, QUESTIONS.length);

      quizSection.style.display = 'none';
      resultSection.style.display = 'block';
      resultSection.scrollIntoView({ behavior: 'smooth' });
    }

    document.getElementById('submitBtn')?.addEventListener('click', () => {
      const answered = [...document.querySelectorAll('.question')].filter(q => q.querySelector('input:checked')).length;
      if (answered < Math.floor(QUESTIONS.length * 0.5)) {
        showError('Zu wenige Antworten', 'Bitte beantworte mindestens die Hälfte der Aussagen, damit das Ergebnis passt.');
        return;
      }
      evaluate();
    });

    // ---- HORIZONTALE Balken (on-screen) ----
    function drawBarsHorizontal(pct, winner) {
      const host = document.getElementById('chartRows');
      if (!host) return;
      host.innerHTML = '';

      const data = [
        { label: 'Anwendungsentwicklung (SAP)', key: 'AE' },
        { label: 'Systemintegration', key: 'SI' },
        { label: 'Digitalisierungsmanagement', key: 'DM' }
      ];

      data.forEach(item => {
        const percent = Math.min(100, Math.max(0, pct[item.key] || 0));
        const row = document.createElement('div');
        row.className = 'row' + (item.key === winner ? ' winner' : '');

        const label = document.createElement('div');
        label.className = 'row-label';
        label.textContent = item.label;

        const bar = document.createElement('div');
        bar.className = 'row-bar';

        const fill = document.createElement('div');
        fill.className = 'row-fill';
        fill.style.width = percent + '%';

        bar.appendChild(fill);

        const pctEl = document.createElement('div');
        pctEl.className = 'row-pct';
        pctEl.textContent = percent + '%';

        row.appendChild(label);
        row.appendChild(bar);
        row.appendChild(pctEl);

        host.appendChild(row);
      });
    }

    // ---- PRINT DATA (nur Ergebnis) ----
    function fillPrintData(pct, winner, answered, total) {
      // Meta (Datum/Uhrzeit + Beantwortungsstand)
      const dt = new Date();
      const dtStr = dt.toLocaleString('de-DE', {
        year: 'numeric', month: '2-digit', day: '2-digit',
        hour: '2-digit', minute: '2-digit'
      });
      document.getElementById('printMeta').textContent =
        `Erstellt am ${dtStr} · Beantwortet: ${answered}/${total} Aussagen`;

      // Winner + Beschreibung
      document.getElementById('printWinnerBadge').textContent =
        `Beste Übereinstimmung: ${PROFILES[winner].name}`;
      document.getElementById('printWinnerText').textContent =
        PROFILES[winner].desc;

      // Prozentliste
      const list = document.getElementById('printList');
      list.innerHTML = '';
      [
        { label: 'Anwendungsentwicklung (SAP)', key: 'AE' },
        { label: 'Systemintegration', key: 'SI' },
        { label: 'Digitalisierungsmanagement', key: 'DM' }
      ].forEach(item => {
        const li = document.createElement('li');
        const label = document.createElement('div');
        label.className = 'label';
        label.textContent = item.label;

        const pctEl = document.createElement('div');
        pctEl.className = 'pct';
        pctEl.textContent = (pct[item.key] ?? 0) + '%';

        li.appendChild(label);
        li.appendChild(pctEl);
        list.appendChild(li);
      });
    }

    // Modal handling
    const modal = document.getElementById('infoModal');
    const modalTitle = document.getElementById('modalTitle');
    const modalBody = document.getElementById('modalBody');
    const modalClose = document.getElementById('modalClose');
    function openModal(title, text) { modalTitle.textContent = title; modalBody.textContent = text; modal.classList.add('open'); }
    function closeModal() { modal.classList.remove('open'); }

    // Error Modal handling
    const errorModal = document.getElementById('errorModal');
    const errorTitle = document.getElementById('errorTitle');
    const errorMessage = document.getElementById('errorMessage');
    const errorBtn = document.getElementById('errorBtn');
    function showError(title, message) { errorTitle.textContent = title; errorMessage.textContent = message; errorModal.classList.add('open'); }
    function closeError() { errorModal.classList.remove('open'); }
    errorBtn?.addEventListener('click', closeError);
    errorModal?.addEventListener('click', (e) => { if (e.target === errorModal) closeError(); });

    document.addEventListener('click', (e) => {
      if (e.target.classList.contains('info-btn')) {
        openModal(e.target.dataset.title, e.target.dataset.text);
      }
      if (e.target === modal) { closeModal(); }
    });
    modalClose.addEventListener('click', closeModal);
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { closeModal(); if (errorModal.classList.contains('open')) closeError(); } });

    document.addEventListener('DOMContentLoaded', () => { renderQuestions(); resetIdle(); });
  </script>
</body>

</html>
