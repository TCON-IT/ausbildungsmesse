<!DOCTYPE html>
<html lang="de">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ausbildungs‑Matcher (Junior) – SAP Beratungshaus</title>
  <style>
    :root {
      --bg: #0f172a;
      --card: #1f2937;
      --muted: #94a3b8;
      --text: #e5e7eb;
      --brand: #00b7f3;
      --brand-2: #ff8d0b;
      --shadow: 0 20px 60px rgba(0, 0, 0, .35);
      --radius: 16px;
    }

    * {
      box-sizing: border-box
    }

    html,
    body {
      height: 100%
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial;
      background: url('Hintergrund.png') no-repeat center center fixed;
      background-size: cover;
      color: var(--text)
    }

    /* Top Banner */
    .topbar {
      position: sticky;
      top: 0;
      z-index: 50;
      backdrop-filter: blur(6px);
      background: linear-gradient(180deg, rgba(15, 23, 42, .9), rgba(15, 23, 42, .75));
      border-bottom: 1px solid rgba(148, 163, 184, .25)
    }

    .topbar-inner {
      max-width: 1100px;
      margin: 0 auto;
      padding: 10px 18px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 14px
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 12px
    }

    .brand img {
      height: 32px
    }

    .brand-name {
      font-weight: 700;
      letter-spacing: .2px;
      color: var(--brand)
    }

    .contact a {
      color: #e5e7eb;
      text-decoration: none;
      font-weight: 700;
      border-bottom: 2px solid transparent
    }

    .contact a:hover {
      color: var(--brand);
      border-bottom-color: var(--brand-2)
    }

    header {
      max-width: 1100px;
      margin: 20px auto 18px;
      padding: 0 18px
    }

    .hero {
      background: linear-gradient(135deg, rgba(0, 183, 243, .18), rgba(255, 141, 11, .14));
      border: 1px solid rgba(148, 163, 184, .18);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow)
    }

    .title {
      font-size: clamp(20px, 2.8vw, 32px);
      line-height: 1.15;
      margin: 0
    }

    .title span {
      color: var(--brand)
    }

    .pill {
      display: inline-block;
      margin-bottom: 8px;
      padding: 8px 14px;
      border-radius: 99px;
      background: rgba(0, 183, 243, .18);
      color: #001018;
      border: 1px solid rgba(0, 183, 243, .45);
      font-weight: 700;
      letter-spacing: .2px
    }

    main {
      max-width: 1100px;
      margin: 0 auto;
      padding: 0 18px 60px
    }

    /* Grid – Info-Karten nebeneinander ab >= 900px */
    .grid {
      display: grid;
      gap: 16px;
      grid-template-columns: repeat(12, 1fr)
    }

    .col-4 {
      grid-column: span 12
    }

    @media(min-width: 900px) {
      .col-4 {
        grid-column: span 4
      }
    }

    .card {
      background: var(--card);
      border: 1px solid rgba(148, 163, 184, .18);
      border-radius: var(--radius);
      padding: 16px;
      box-shadow: var(--shadow)
    }

    .card h3 {
      margin: 0 0 8px
    }

    .card .actions {
      display: flex;
      gap: 10px
    }

    /* Buttons */
    .btn-solid {
      appearance: none;
      background: var(--brand-2);
      color: #1f1300;
      border: none;
      border-radius: 12px;
      padding: 12px 18px;
      font-weight: 800;
      cursor: pointer;
      box-shadow: 0 10px 24px rgba(255, 141, 11, .25)
    }

    .btn-solid:hover {
      filter: brightness(1.05)
    }

    .btn-outline {
      appearance: none;
      background: transparent;
      color: var(--text);
      border: 1px solid rgba(148, 163, 184, .35);
      border-radius: 12px;
      padding: 12px 18px;
      font-weight: 700;
      cursor: pointer
    }

    #quiz {
      display: none
    }

    .progress {
      height: 10px;
      background: #0b1220;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, .18);
      overflow: hidden
    }

    .bar {
      height: 100%;
      width: 0;
      background: linear-gradient(90deg, var(--brand), var(--brand-2))
    }

    .question {
      padding: 14px;
      border-radius: 12px;
      border: 1px solid rgba(148, 163, 184, .18);
      margin: 10px 0;
      background: rgba(2, 6, 23, .55)
    }

    .q-text {
      margin: 0 0 10px;
      font-weight: 600
    }

    .options {
      display: flex;
      gap: 10px;
      flex-wrap: wrap
    }

    .option {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 9px 12px;
      border-radius: 10px;
      border: 1px solid rgba(148, 163, 184, .25);
      cursor: pointer;
      background: rgba(148, 163, 184, .06)
    }

    .option input {
      accent-color: var(--brand);
      transform: scale(1.2)
    }

    #result {
      display: none
    }

    .result-badge {
      font-weight: 800;
      color: #001018;
      background: linear-gradient(90deg, var(--brand), var(--brand-2));
      display: inline-block;
      padding: 10px 14px;
      border-radius: 999px
    }

    .chart {
      border: 1px solid rgba(148, 163, 184, .18);
      border-radius: 12px;
      padding: 8px;
      background: rgba(2, 6, 23, .55);
      overflow: hidden
    }

    .chart canvas {
      display: block;
      width: 100%;
      height: auto
    }

    .result-grid {
      display: grid;
      gap: 16px;
      grid-template-columns: repeat(12, 1fr)
    }

    .span-7 {
      grid-column: span 12
    }

    .span-5 {
      grid-column: span 12
    }

    @media(min-width: 1000px) {
      .span-7 {
        grid-column: span 7
      }

      .span-5 {
        grid-column: span 5
      }
    }

    /* Modal */
    .modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(2, 6, 23, .8)
    }

    .modal.open {
      display: flex
    }

    .modal-dialog {
      max-width: 1100px;
      width: 96%;
      max-height: 88vh;
      background: var(--card);
      border: 1px solid rgba(148, 163, 184, .25);
      border-radius: 20px;
      box-shadow: var(--shadow);
      overflow: auto
    }

    .modal-head {
      position: sticky;
      top: 0;
      background: var(--card);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 18px 20px;
      border-bottom: 1px solid rgba(148, 163, 184, .2)
    }

    .modal-title {
      font-size: 26px;
      font-weight: 900
    }

    .modal-body {
      padding: 22px 20px 24px;
      color: var(--text);
      font-size: 1.1rem;
      line-height: 1.6
    }

    .close-x {
      appearance: none;
      background: transparent;
      color: #e5e7eb;
      border: none;
      font-size: 28px;
      cursor: pointer
    }

    /* Error Modal */
    .error-modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(2, 6, 23, .8);
      z-index: 100
    }

    .error-modal.open {
      display: flex
    }

    .error-dialog {
      max-width: 500px;
      width: 96%;
      background: var(--card);
      border: 1px solid rgba(148, 163, 184, .25);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 0;
      animation: slideIn 0.3s ease-out
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: scale(0.9) translateY(-20px)
      }

      to {
        opacity: 1;
        transform: scale(1) translateY(0)
      }
    }

    .error-header {
      background: #4b5563;
      padding: 20px;
      border-radius: calc(var(--radius) - 1px) calc(var(--radius) - 1px) 0 0;
      display: flex;
      align-items: center;
      gap: 12px
    }

    .error-icon {
      font-size: 28px;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(255, 255, 255, .2);
      border-radius: 50%
    }

    .error-title {
      font-size: 20px;
      font-weight: 800;
      margin: 0;
      color: #001018
    }

    .error-body {
      padding: 24px 20px
    }

    .error-message {
      font-size: 16px;
      line-height: 1.6;
      color: var(--text);
      margin: 0 0 20px;
      text-align: center
    }

    .error-footer {
      display: flex;
      gap: 12px;
      justify-content: center;
      padding: 0 20px 20px
    }

    .error-btn {
      appearance: none;
      background: #4b5563;
      color: #e5e7eb;
      border: none;
      border-radius: 12px;
      padding: 12px 24px;
      font-weight: 800;
      cursor: pointer;
      box-shadow: none;
      transition: all 0.2s ease
    }

    .error-btn:hover {
      filter: brightness(1.1);
      transform: translateY(-2px);
      box-shadow: 0 12px 32px rgba(0, 183, 243, .35)
    }

    .error-btn:active {
      transform: translateY(0)
    }
  </style>
</head>

<body>
  <div class="topbar" role="banner" aria-label="Kopfbereich">
    <div class="topbar-inner">
      <div class="brand">
        <img src="tcon-logo.png" alt="tcon Logo" />
        <div class="brand-name">tcon · SAP‑Beratungshaus</div>
      </div>
      <div class="contact">
        <a href="mailto:info@tcon.com" aria-label="E-Mail an info@tcon.com senden">info(at)tcon.com</a>
      </div>
    </div>
  </div>

  <header>
    <div class="hero card">
      <h1 class="title">Welche Ausbildung passt zu dir? <span>Anwendungsentwicklung</span>,
        <span>Systemintegration</span> oder <span>Digitalisierungsmanagement</span>
      </h1>
      <div class="cta" style="display:flex; gap:12px; flex-wrap:wrap; margin-top:12px">
        <a class="btn-solid" href="#quiz" id="startBtn">Eignungscheck starten</a>
      </div>
    </div>
  </header>

  <main>
    <!-- Info-Karten (nebeneinander auf großen Screens) -->
    <section class="grid" aria-label="Ausbildungsberufe">
      <article class="card col-4">
        <h3>Kaufmännisch – Digitalisierungsmanagement</h3>
        <div class="actions"><button class="btn-outline info-btn" data-title="Kaufmännisch – Digitalisierungsmanagement"
            data-text="Du findest es spannend, was Software im Unternehmen möglich macht und möchtest dabei auch programmieren lernen? In deiner Ausbildung lernst du, wie SAP als digitale Lösung Geschäftsprozesse besser macht – und wie du als Berater:in mit Verständnis für Technik, Organisation und Kommunikation genau daran mitarbeitest. Du bringst dich in Projekte ein, arbeitest mit verschiedenen Teams zusammen und wächst Schritt für Schritt in die Welt der Digitalisierung und Beratung hinein.">Info</button>
        </div>
      </article>
      <article class="card col-4">
        <h3>Fachinformatik – Systemintegration</h3>
        <div class="actions"><button class="btn-outline info-btn" data-title="Fachinformatik – Systemintegration"
            data-text="Du sorgst dafür, dass unsere IT läuft. Du lernst, Netzwerke einzurichten, Server zu betreuen und User zu unterstützen. Technik im Hintergrund? Ohne dich geht hier nichts.">Info</button>
        </div>
      </article>
      <article class="card col-4">
        <h3>Fachinformatik – Anwendungsentwicklung (SAP)</h3>
        <div class="actions"><button class="btn-outline info-btn"
            data-title="Fachinformatik – Anwendungsentwicklung (SAP)"
            data-text="Du entwickelst Software, die was kann und gebraucht wird. Mit Köpfchen und Kreativität schreibst du Code, testest Programme und findest Lösungen für echte Aufgaben. So wird aus Theorie Praxis.">Info</button>
        </div>
      </article>
    </section>

    <!-- Quiz -->
    <section id="quiz" class="card" aria-live="polite" aria-label="Eignungscheck" style="margin-top:16px">
      <div style="display:flex; align-items:center; gap:14px; margin-bottom:12px">
        <h2 style="margin:0">Eignungscheck</h2>
        <div class="progress" style="flex:1">
          <div class="bar" id="progressBar"></div>
        </div>
        <div id="progressText" style="color:var(--muted); min-width:90px; text-align:right">0%</div>
      </div>
      <div id="questionList"></div>
      <div style="display:flex; gap:12px; margin-top:14px">
        <button class="btn-solid" id="submitBtn">Auswertung anzeigen</button>
        <button class="btn-outline" id="resetBtn">Zurücksetzen</button>
      </div>
    </section>

    <!-- Ergebnis -->
    <section id="result" class="card" aria-label="Ergebnis">
      <div style="display:flex; align-items:center; gap:12px; flex-wrap:wrap">
        <div class="result-badge" id="winnerBadge">Beste Übereinstimmung</div>
        <div id="winnerHint" style="color:var(--muted)"></div>
      </div>

      <div class="result-grid" style="margin-top:16px">
        <div class="span-7">
          <h3 style="margin-top:0">Dein Eignungsprofil</h3>
          <div class="chart"><canvas id="chart" role="img" aria-label="Balkendiagramm mit Ergebnissen"></canvas></div>
        </div>
        <aside class="span-5">
          <h3>Empfehlung</h3>
          <div id="winnerText"></div>
          <div class="cta" style="display:flex; gap:12px; flex-wrap:wrap; margin-top:12px">
            <button class="btn-outline" onclick="window.print()">Ergebnis als PDF</button>
            <button class="btn-outline" id="restartBtn">Neu starten</button>
          </div>
        </aside>
      </div>
    </section>
  </main>

  <div class="modal" id="infoModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle"
    aria-describedby="modalBody">
    <div class="modal-dialog">
      <div class="modal-head">
        <div class="modal-title" id="modalTitle">Titel</div>
        <button class="close-x" id="modalClose" aria-label="Schließen">×</button>
      </div>
      <div class="modal-body" id="modalBody">Text</div>
    </div>
  </div>

  <div class="error-modal" id="errorModal" role="dialog" aria-modal="true" aria-labelledby="errorTitle">
    <div class="error-dialog">
      <div class="error-header">
        <h2 class="error-title" id="errorTitle">Hinweis</h2>
      </div>
      <div class="error-body">
        <p class="error-message" id="errorMessage">Bitte beantworte mindestens die Hälfte der Aussagen.</p>
        <div class="error-footer">
          <button class="error-btn" id="errorBtn">Verstanden</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const QUESTIONS = [
      { t: "Ich tüftele gern mit Programmieren oder möchte es lernen.", w: { AE: 2, SI: 1, DM: 1 } },
      { t: "Ich mag es, am Bildschirm Schritt für Schritt eine Lösung zu bauen.", w: { AE: 2, SI: 1, DM: 1 } },
      { t: "Ich habe Spaß an Mathe‑ oder Logikrätseln.", w: { AE: 2, SI: 1, DM: 1 } },
      { t: "Ich stelle mir gern vor, wie eine App aussehen und funktionieren soll.", w: { AE: 2, SI: 0, DM: 1 } },
      { t: "Ich arbeite gern länger ruhig an einer Aufgabe, bis sie läuft.", w: { AE: 2, SI: 1, DM: 1 } },
      { t: "Ich finde es spannend zu verstehen, wie Daten in Programmen gespeichert und genutzt werden.", w: { AE: 2, SI: 0, DM: 1 } },
      { t: "Ich möchte verstehen, wie Firmen mit Software arbeiten (z. B. mit SAP).", w: { AE: 2, SI: 0, DM: 2 } },
      { t: "Ich probiere gern Ideen aus und verbessere sie nach und nach.", w: { AE: 2, SI: 1, DM: 2 } },

      { t: "Ich richte gern Geräte ein (Laptop, Handy, Drucker).", w: { AE: 1, SI: 2, DM: 0 } },
      { t: "Ich helfe anderen bei Computerproblemen und bleibe geduldig.", w: { AE: 0, SI: 2, DM: 2 } },
      { t: "Mich interessiert, wie das Internet und Netzwerke funktionieren.", w: { AE: 1, SI: 2, DM: 0 } },
      { t: "Ich vergleiche gern Technik und überlege, was zuverlässig und sicher ist.", w: { AE: 0, SI: 2, DM: 2 } },
      { t: "Ich mag es, Dinge praktisch zu testen und schnell zum Laufen zu bringen.", w: { AE: 1, SI: 2, DM: 0 } },
      { t: "Ich finde Ordnung wichtig (Updates, Passwörter, Backups).", w: { AE: 0, SI: 2, DM: 1 } },

      { t: "Ich rede gern mit Menschen, um zu verstehen, was sie brauchen.", w: { AE: 1, SI: 0, DM: 2 } },
      { t: "Ich kann Dinge gut erklären und traue mir kleine Präsentationen zu.", w: { AE: 0, SI: 0, DM: 2 } },
      { t: "Ich plane gern und behalte den Überblick über Aufgaben.", w: { AE: 0, SI: 1, DM: 2 } },
      { t: "Ich überlege, wie man Abläufe einfacher und schneller machen kann.", w: { AE: 1, SI: 0, DM: 2 } },
      { t: "Ich denke auch an Kosten und Nutzen, wenn ich entscheide.", w: { AE: 0, SI: 1, DM: 2 } },
      { t: "Ich achte auf Regeln und Datenschutz.", w: { AE: 0, SI: 1, DM: 2 } },

      { t: "Ich arbeite gern im Team und hole mir Feedback.", w: { AE: 1, SI: 1, DM: 1 } },
      { t: "Ich bleibe dran, auch wenn etwas schwierig ist.", w: { AE: 1, SI: 1, DM: 1 } },
      { t: "Englisch im Internet (Videos, Anleitungen) ist für mich okay.", w: { AE: 1, SI: 1, DM: 1 } },
      { t: "Ich interessiere mich für große Programme, mit denen Firmen arbeiten (z. B. SAP).", w: { AE: 2, SI: 0, DM: 2 } },
      { t: "Ich kann mir vorstellen, mit Kundinnen und Kunden zu arbeiten.", w: { AE: 1, SI: 0, DM: 2 } },
      { t: "Ich finde spannend, wenn verschiedene Programme miteinander sprechen.", w: { AE: 2, SI: 1, DM: 2 } },
      { t: "Ich kann mir vorstellen, viel am PC im Büro zu arbeiten.", w: { AE: 1, SI: 1, DM: 1 } },
      { t: "Ich dokumentiere meine Arbeit ordentlich (Notizen, Screenshots).", w: { AE: 1, SI: 1, DM: 1 } },
    ];

    const PROFILES = {
      AE: {
        name: "Fachinformatik – Anwendungsentwicklung (SAP)",
        desc: `Du passt gut zur Anwendungsentwicklung. Du baust gern Lösungen am Computer, bleibst dran und hast Interesse daran,
             wie Firmen mit Software arbeiten. Bei uns geht es viel um SAP – später lernst du z. B., wie man Oberflächen baut und
             Funktionen programmiert. Schritt für Schritt, im Team.` },
      SI: {
        name: "Fachinformatik – Systemintegration",
        desc: `Du passt gut zur Systemintegration. Du richtest gern Geräte ein, hilfst anderen und willst, dass Technik zuverlässig läuft.
             Du testest praktisch, hältst Ordnung (Updates, Sicherheit) und erklärst geduldig. So hältst du die IT am Laufen.` },
      DM: {
        name: "Kaufmännisch – Digitalisierungsmanagement",
        desc: `Du passt gut zum Digitalisierungsmanagement. Du sprichst gern mit Menschen, planst, erklärst und machst Abläufe einfacher.
             Du behältst Kosten/Nutzen im Blick und achtest auf Regeln. Gemeinsam mit uns setzt du passende digitale Lösungen um – oft mit SAP.` }
    };

    const chartCanvas = document.getElementById('chart');
    const listEl = document.getElementById('questionList');
    const barEl = document.getElementById('progressBar');
    const pText = document.getElementById('progressText');
    const quizSection = document.getElementById('quiz');
    const resultSection = document.getElementById('result');
    const startBtn = document.getElementById('startBtn');
    const submitBtn = document.getElementById('submitBtn');
    const resetBtn = document.getElementById('resetBtn');
    const restartBtn = document.getElementById('restartBtn');
    const fullscreenBtn = document.getElementById('fullscreenBtn');

    function renderQuestions() {
      listEl.innerHTML = '';
      QUESTIONS.forEach((q, i) => {
        const id = 'q' + i;
        const div = document.createElement('div');
        div.className = 'question';
        div.innerHTML = `
        <p class="q-text">${i + 1}. ${q.t}</p>
        <div class="options" role="radiogroup" aria-label="Antworten">
          <label class="option"><input type="radio" name="${id}" value="2"> Trifft zu</label>
          <label class="option"><input type="radio" name="${id}" value="1"> Teilweise</label>
          <label class="option"><input type="radio" name="${id}" value="0"> Trifft nicht zu</label>
        </div>`;
        listEl.appendChild(div);
      });
      updateProgress();
    }

    function updateProgress() {
      const total = QUESTIONS.length;
      const answered = [...document.querySelectorAll('.question')].filter(q => q.querySelector('input:checked')).length;
      const pct = Math.round((answered / total) * 100);
      barEl.style.width = pct + '%';
      pText.textContent = pct + '%';
    }

    listEl.addEventListener('change', updateProgress);

    startBtn?.addEventListener('click', (e) => {
      e.preventDefault();
      quizSection.style.display = 'block';
      resultSection.style.display = 'none';
      document.getElementById('quiz').scrollIntoView({ behavior: 'smooth' });
    });

    resetBtn?.addEventListener('click', () => { renderQuestions(); window.scrollTo({ top: 0, behavior: 'smooth' }); });
    restartBtn?.addEventListener('click', () => {
      resultSection.style.display = 'none';
      quizSection.style.display = 'block';
      renderQuestions();
      document.getElementById('quiz').scrollIntoView({ behavior: 'smooth' });
    });

    fullscreenBtn?.addEventListener('click', () => {
      if (!document.fullscreenElement) { document.documentElement.requestFullscreen?.(); }
      else { document.exitFullscreen?.(); }
    });

    let idleTimer;
    function resetIdle() {
      clearTimeout(idleTimer);
      idleTimer = setTimeout(() => { renderQuestions(); window.scrollTo({ top: 0, behavior: 'smooth' }); }, 180000);
    }
    ['click', 'keydown', 'mousemove', 'touchstart'].forEach(evt => window.addEventListener(evt, resetIdle));

    function evaluate() {
      const scores = { AE: 0, SI: 0, DM: 0 };
      let answered = 0;
      QUESTIONS.forEach((q, i) => {
        const sel = document.querySelector(`input[name=q${i}]:checked`);
        if (!sel) return;
        answered++;
        const val = parseInt(sel.value, 10);
        for (const k of Object.keys(q.w)) {
          scores[k] += q.w[k] * val;
        }
      });

      const max = { AE: 0, SI: 0, DM: 0 };
      QUESTIONS.forEach(q => { for (const k of Object.keys(q.w)) { max[k] += q.w[k] * 2; } });

      const pct = {
        AE: Math.round(scores.AE / max.AE * 100),
        SI: Math.round(scores.SI / max.SI * 100),
        DM: Math.round(scores.DM / max.DM * 100)
      };

      const order = Object.keys(pct).sort((a, b) => pct[b] - pct[a]);
      const winner = order[0];

      document.getElementById('winnerBadge').textContent = `Beste Übereinstimmung: ${PROFILES[winner].name}`;
      document.getElementById('winnerHint').textContent = `Beantwortet: ${answered}/${QUESTIONS.length} Aussagen`;
      document.getElementById('winnerText').innerHTML = `<p>${PROFILES[winner].desc}</p>`;

      drawChartLabelFirst(pct, winner);

      quizSection.style.display = 'none';
      resultSection.style.display = 'block';
      resultSection.scrollIntoView({ behavior: 'smooth' });
    }

    document.getElementById('submitBtn')?.addEventListener('click', () => {
      const answered = [...document.querySelectorAll('.question')].filter(q => q.querySelector('input:checked')).length;
      if (answered < Math.floor(QUESTIONS.length * 0.5)) {
        showError('Zu wenige Antworten', 'Bitte beantworte mindestens die Hälfte der Aussagen, damit das Ergebnis passt.');
        return;
      }
      evaluate();
    });

    // Label links, Balken rechts der Bezeichnung, geklemmt, Prozent im Balken
    function drawChartLabelFirst(pct, winner) {
      const c = chartCanvas;
      const container = c.parentElement; // .chart
      const cssW = container.clientWidth - 16; // inner padding safety
      const cssH = 220;
      const dpr = window.devicePixelRatio || 1;

      c.width = Math.max(420, Math.floor(cssW * dpr));
      c.height = Math.floor(cssH * dpr);
      c.style.width = Math.max(420, cssW) + 'px';
      c.style.height = cssH + 'px';

      const g = c.getContext('2d');
      g.setTransform(dpr, 0, 0, dpr, 0, 0);

      const W = Math.max(420, cssW), H = cssH;
      const labelW = 260;  // fester Labelbereich links, ausreichend für lange Titel
      const pad = 24;      // Innenabstand links/rechts
      const barH = 30;     // schlanker Balken
      const gap = 28;      // Abstand zwischen Balken
      const startY = 36;   // Top padding

      g.clearRect(0, 0, W, H);
      g.font = '14px system-ui, Segoe UI, Roboto, Arial';
      g.textBaseline = 'middle';

      const labels = [
        { k: 'AE', label: 'Anwendungsentwicklung (SAP)' },
        { k: 'SI', label: 'Systemintegration' },
        { k: 'DM', label: 'Digitalisierungsmanagement' }
      ];

      labels.forEach((it, idx) => {
        const y = startY + idx * (barH + gap);

        // Label links
        g.fillStyle = '#cbd5e1';
        g.fillText(it.label, pad, y + barH / 2);

        // Achslinie (hinter Balken)
        g.fillStyle = 'rgba(148,163,184,.35)';
        const axisX = pad + labelW;
        const axisW = W - pad - axisX;
        g.fillRect(axisX, y + barH, axisW, 1);

        // Balkenbreite (geklemmt auf Achse)
        const val = Math.max(0, Math.min(100, pct[it.k]));
        const wMax = axisW;               // maximale Breite innerhalb der Box
        const wBar = Math.max(4, wMax * val / 100);

        // Balken zeichnen
        const grd = g.createLinearGradient(axisX, 0, axisX + wBar, 0);
        const active = (it.k === winner);
        grd.addColorStop(0, active ? '#00b7f3' : 'rgba(148,163,184,.45)');
        grd.addColorStop(1, active ? '#ff8d0b' : 'rgba(148,163,184,.25)');
        g.fillStyle = grd;
        g.fillRect(axisX, y, wBar, barH);

        // Prozent im Balken – falls zu kurz, rechts daneben aber innerhalb Achse
        const text = val + '%';
        const tw = g.measureText(text).width;
        let tx = axisX + wBar - tw - 8; // bevorzugt im Balken
        let ty = y + barH / 2;
        if (wBar < tw + 16) tx = Math.min(axisX + wBar + 8, axisX + wMax - tw); // rechts neben Balken, aber nicht über Rand
        g.fillStyle = '#e5e7eb';
        g.fillText(text, Math.max(axisX + 4, tx), ty);
      });
    }

    // Modal handling
    const modal = document.getElementById('infoModal');
    const modalTitle = document.getElementById('modalTitle');
    const modalBody = document.getElementById('modalBody');
    const modalClose = document.getElementById('modalClose');
    function openModal(title, text) { modalTitle.textContent = title; modalBody.textContent = text; modal.classList.add('open'); }
    function closeModal() { modal.classList.remove('open'); }

    // Error Modal handling
    const errorModal = document.getElementById('errorModal');
    const errorTitle = document.getElementById('errorTitle');
    const errorMessage = document.getElementById('errorMessage');
    const errorBtn = document.getElementById('errorBtn');

    function showError(title, message) {
      errorTitle.textContent = title;
      errorMessage.textContent = message;
      errorModal.classList.add('open');
    }

    function closeError() {
      errorModal.classList.remove('open');
    }

    errorBtn?.addEventListener('click', closeError);
    errorModal?.addEventListener('click', (e) => { if (e.target === errorModal) closeError(); });
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && errorModal.classList.contains('open')) closeError(); });

    document.addEventListener('click', (e) => { if (e.target.classList.contains('info-btn')) { openModal(e.target.dataset.title, e.target.dataset.text); } if (e.target === modal) { closeModal(); } });
    modalClose.addEventListener('click', closeModal);
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeModal(); });

    document.addEventListener('DOMContentLoaded', () => { renderQuestions(); resetIdle(); });
  </script>
</body>

</html>